<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>

</body>
<script>
    // async function async1() {
    //     console.log("async1 start")
    //     await async2();
    //     //await async2(), 这里的代码相当于new Promise(()=>{async2()})
    //     //而将 await 后面的全部代码放到.then()中去
    //     console.log("async1 end")
    // };

    // async function async2() {
    //     console.log("async2")
    // };

    // console.log("script start");

    // setTimeout(function() {
    //     console.log("setTimeout")
    // }, 0);

    // async1();

    // new Promise(function(resolve) {
    //     console.log("promise1")
    //     resolve()
    // }).then(function() {
    //     console.log("promise2")
    // });

    // console.log("script end");

    // script start
    // async1 start
    // async2
    // promise1
    // script end
    // async1 end
    // promise2
    // setTimeout

    // 1.定时器的事件会被放置在消息队列
    // 2.promise实例对象的then方法会被放置在微任务队列
    // 3.等待调用栈为空时再执行微任务队列和消息队列
    // 4.先执行微任务队列再执行消息队列



    // 例题2
    // console.log("start");
    // setTimeout(() => {
    //     console.log("children2")
    //     Promise.resolve().then(() => {
    //         console.log("children3")
    //     })
    // }, 0)

    // new Promise(function(resolve, reject) {
    //     console.log("children4")
    //     setTimeout(function() {
    //         console.log("children5")
    //         resolve("children6")
    //     }, 0)
    // }).then(res => {
    //     console.log("children7")
    //     setTimeout(() => {
    //         console.log(res)
    //     }, 0)
    // });

    // start
    // children4
    // children2
    // children3
    // children5
    // children7
    // children6
</script>
<script>
    // async function async1() {
    //     console.log('async1 start');
    //     await async2();
    //     console.log('async1 end');
    // }
    // async function async2() {
    //     console.log('async2');
    // }
    // console.log('script start');
    // setTimeout(function() {
    //     console.log('setTimeout');
    // }, 0)
    // async1();
    // new Promise(function(resolve) {
    //     console.log('promise1');
    //     resolve();
    // }).then(function() {
    //     console.log('promise2');
    // });
    // console.log('script end');

    // script start
    // async1 start
    // async2
    // promise1
    // script end
    // async1 end
    // promise2
    // setTimeout
</script>
<script>
    var p = new Promise(resolve => {
        console.log(4);
        resolve(5);
    }).then(resolve => {
        console.log(resolve);
    });

    function func1() {
        console.log(1);
    };

    function fun2() {
        setTimeout(() => {
            console.log(2);
        });
        func1();
        console.log(3);

        new Promise(resolve => {
            resolve();
        }).then(resolve => {
            console.log('新的resolve');
        })

        p.then(resolve => {
            console.log(7);
        }).then(resolve => {
            console.log(6);
        });
    }
    fun2()

    // 4
    // 1
    // 3
    // 5
    // 新的resolve
    // 7
    // 6
    // 2
</script>

</html>